{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      activeForm: 'login',\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loginRules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      },\n      registerForm: {\n        username: '',\n        password: ''\n      },\n      registerRules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    switchForm(formName) {\n      this.activeForm = formName;\n    },\n    register() {\n      this.$refs.registerForm.validate(valid => {\n        if (valid) {\n          // 执行注册逻辑\n          this.$http.post(\"/user/register\", this.registerForm).then(res => {\n            console.log(res);\n            localStorage.setItem(\"userId\", res.data.body.id);\n            localStorage.setItem(\"userRole\", res.data.body.role);\n            if (res.data.code == 200) {\n              this.$router.push(\"/meetingRoom\");\n              this.$message.success(\"注册并登录成功\");\n            }\n          }).catch(err => {\n            console.log(err);\n          });\n        } else {\n          console.log('注册失败');\n          return false;\n        }\n      });\n    },\n    login() {\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          // 执行登录逻辑\n          this.$http.post(\"/user/login\", this.loginForm).then(res => {\n            if (res.data.code == 200) {\n              localStorage.setItem(\"userId\", res.data.body.id);\n              localStorage.setItem(\"userRole\", res.data.body.role);\n              this.$message.success(\"登录成功\");\n              this.$router.push(\"/meetingRoom\");\n            } else {\n              this.$message.error(\"用户名或密码错误\");\n            }\n          }).catch(err => {\n            console.log(err);\n          });\n        } else {\n          console.log('登录失败');\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["data","activeForm","loginForm","username","password","loginRules","required","message","trigger","registerForm","registerRules","methods","switchForm","formName","register","$refs","validate","valid","$http","post","then","res","console","log","localStorage","setItem","body","id","role","code","$router","push","$message","success","catch","err","login","error"],"sources":["C:\\Users\\Lenovo\\Documents\\webProj\\web\\src\\components\\user\\LoginCard.vue"],"sourcesContent":["<template>\r\n    <el-card shadow=\"hover\" style=\"position:fixed\">\r\n        <div v-if=\"activeForm === 'login'\">\r\n            <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" label-width=\"80px\" class=\"login-form\">\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                    <el-input v-model=\"loginForm.username\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"password\">\r\n                    <el-input type=\"password\" v-model=\"loginForm.password\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"login\">登录</el-button>\r\n                    <el-button type=\"\" v-if=\"activeForm === 'login'\" :class=\"{ active: activeForm === 'login' }\"\r\n                        @click=\"switchForm('register')\">注册\r\n                    </el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n        <div v-else-if=\"activeForm === 'register'\">\r\n            <el-form ref=\"registerForm\" :model=\"registerForm\" :rules=\"registerRules\" label-width=\"80px\"\r\n                class=\"login-form\">\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                    <el-input v-model=\"registerForm.username\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"password\">\r\n                    <el-input type=\"password\" v-model=\"registerForm.password\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"register\">注册</el-button>\r\n                    <el-button type=\"\" v-if=\"activeForm === 'register'\" :class=\"{ active: activeForm === 'register' }\"\r\n                        @click=\"switchForm('login')\">登录\r\n                    </el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            activeForm: 'login',\r\n            loginForm: {\r\n                username: '',\r\n                password: ''\r\n            },\r\n            loginRules: {\r\n                username: [\r\n                    { required: true, message: '请输入用户名', trigger: 'blur' }\r\n                ],\r\n                password: [\r\n                    { required: true, message: '请输入密码', trigger: 'blur' }\r\n                ]\r\n            },\r\n            registerForm: {\r\n                username: '',\r\n                password: '',\r\n            },\r\n            registerRules: {\r\n                username: [\r\n                    { required: true, message: '请输入用户名', trigger: 'blur' }\r\n                ],\r\n                password: [\r\n                    { required: true, message: '请输入密码', trigger: 'blur' }\r\n                ]\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        switchForm(formName) {\r\n            this.activeForm = formName;\r\n        },\r\n        register() {\r\n            this.$refs.registerForm.validate((valid) => {\r\n                if (valid) {\r\n                    // 执行注册逻辑\r\n                    this.$http.post(\"/user/register\", this.registerForm).then((res) => {\r\n                        console.log(res);\r\n                        localStorage.setItem(\"userId\", res.data.body.id);\r\n                        localStorage.setItem(\"userRole\", res.data.body.role);\r\n                        if (res.data.code == 200) {\r\n                            this.$router.push(\"/meetingRoom\");\r\n                            this.$message.success(\"注册并登录成功\")\r\n                        }\r\n                    }).catch((err) => {\r\n                        console.log(err);\r\n                    });\r\n                } else {\r\n                    console.log('注册失败');\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        login() {\r\n            this.$refs.loginForm.validate((valid) => {\r\n                if (valid) {\r\n                    // 执行登录逻辑\r\n                    this.$http.post(\"/user/login\", this.loginForm).then((res) => {\r\n                        if (res.data.code == 200) {\r\n                            localStorage.setItem(\"userId\", res.data.body.id);\r\n                            localStorage.setItem(\"userRole\", res.data.body.role);\r\n                            this.$message.success(\"登录成功\")\r\n                            this.$router.push(\"/meetingRoom\");\r\n                        } else {\r\n                            this.$message.error(\"用户名或密码错误\")\r\n                        }\r\n                    }).catch((err) => {\r\n                        console.log(err);\r\n                    });\r\n                } else {\r\n                    console.log('登录失败');\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100vh;\r\n}\r\n\r\n.login-form {\r\n    max-width: 400px;\r\n    width: 100%;\r\n    padding: 20px;\r\n}\r\n\r\n\r\n\r\n\r\n.form-switch .el-button.active {\r\n    color: #409eff;\r\n}\r\n\r\n.login-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100vh;\r\n}\r\n\r\n.login-form {\r\n    height: 400px;\r\n    width: 400px;\r\n    padding: 20px;\r\n}\r\n\r\n.el-form-item .el-button {\r\n    margin-left: 10px;\r\n}\r\n\r\n.form-switch .el-button.active {\r\n    color: #409eff;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}