{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"dialog-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Plus = _resolveComponent(\"Plus\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_form, {\n    model: $setup.newRoom\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"图片\",\n      prop: \"name\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_upload, {\n        \"http-request\": $setup.addImg,\n        multiple: \"\",\n        \"show-file-list\": true,\n        \"list-type\": \"picture-card\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_Plus)]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"类型\",\n      prop: \"capacity\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.newRoom.roomType,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.newRoom.roomType = $event)\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"位置\",\n      prop: \"name\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.newRoom.location,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.newRoom.location = $event)\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\"]), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    loading: $setup.addDialogLoading,\n    onClick: _cache[2] || (_cache[2] = $event => ($setup.addMeetingRoom, _ctx.$emit('submit')))\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"确定\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"loading\"])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementBlock","_Fragment","_createVNode","_component_el_form","model","$setup","newRoom","default","_withCtx","_component_el_form_item","label","prop","_component_el_upload","addImg","multiple","_component_el_icon","_component_Plus","_","_component_el_input","modelValue","roomType","_cache","$event","location","_createElementVNode","_hoisted_1","_component_el_button","type","loading","addDialogLoading","onClick","addMeetingRoom","_ctx","$emit","_createTextVNode"],"sources":["C:\\Users\\Lenovo\\Documents\\Workspace\\Web Project\\forward\\src\\components\\admin\\NewRoom.vue"],"sourcesContent":["<template>\r\n        <el-form :model=\"newRoom\">\r\n            <el-form-item label=\"图片\" prop=\"name\">\r\n                <el-upload\r\n                    :http-request=\"addImg\"\r\n                    multiple\r\n                    :show-file-list=\"true\"\r\n                    list-type=\"picture-card\"\r\n                >\r\n                <el-icon><Plus /></el-icon>\r\n                </el-upload>\r\n            </el-form-item>\r\n            <el-form-item label=\"类型\" prop=\"capacity\">\r\n                <el-input v-model=\"newRoom.roomType\"/>\r\n            </el-form-item>\r\n            <el-form-item label=\"位置\" prop=\"name\">\r\n                <el-input v-model=\"newRoom.location\" />\r\n            </el-form-item>\r\n        </el-form>\r\n        <div class=\"dialog-footer\">\r\n            <el-button type=\"primary\" :loading=\"addDialogLoading\" @click=\"addMeetingRoom,$emit('submit')\">确定</el-button>\r\n        </div>\r\n</template>\r\n<script setup>\r\nimport axios from 'axios';\r\nimport { ref } from 'vue';\r\n\r\nconst addDialogLoading = ref(false);\r\nconst newRoom = ref({\r\n    img: File,\r\n    roomType:\"\",\r\n    location:\"\"\r\n});\r\nconst imgList =ref([])\r\nconst addImg=(option)=>{\r\n    imgList.value.push(option)\r\n}\r\nasync function addMeetingRoom (){\r\n    let dataForm = new FormData();\r\n    dataForm.append('roomType', newRoom.value.roomType)\r\n    dataForm.append('location', newRoom.value.location)\r\n \r\n    imgList.value.forEach((it)=>{\r\n        dataForm.append('filename',it.file)\r\n    })\r\n    await axios({\r\n        method: 'POST',\r\n        url: 'http://localhost:9002/',\r\n        data: dataForm,\r\n        headers: {\r\n            \"Content-Type\": \"multipart/form-data\"\r\n        }\r\n    }).then(response => {\r\n        console.log(response.data)\r\n    })\r\n\r\n\r\n\r\n\r\n    addImg.value.validate((valid) => {\r\n        if (valid) {\r\n            addDialogLoading.value = true;\r\n            // 模拟异步请求\r\n            axios.post(\"/room\", newRoom.value);\r\n            addDialogLoading.value = false;\r\n            //getMeetingRoomList()\r\n        }\r\n    });\r\n};\r\n</script>"],"mappings":";;EAmBaA,KAAK,EAAC;AAAe;;;;;;;;;uBAnBlCC,mBAAA,CAAAC,SAAA,SACQC,YAAA,CAiBUC,kBAAA;IAjBAC,KAAK,EAAEC,MAAA,CAAAC;EAAO;IADhCC,OAAA,EAAAC,QAAA,CAEY,MASe,CATfN,YAAA,CASeO,uBAAA;MATDC,KAAK,EAAC,IAAI;MAACC,IAAI,EAAC;;MAF1CJ,OAAA,EAAAC,QAAA,CAGgB,MAOY,CAPZN,YAAA,CAOYU,oBAAA;QANP,cAAY,EAAEP,MAAA,CAAAQ,MAAM;QACrBC,QAAQ,EAAR,EAAQ;QACP,gBAAc,EAAE,IAAI;QACrB,WAAS,EAAC;;QAP9BP,OAAA,EAAAC,QAAA,CASgB,MAA2B,CAA3BN,YAAA,CAA2Ba,kBAAA;UAT3CR,OAAA,EAAAC,QAAA,CASyB,MAAQ,CAARN,YAAA,CAAQc,eAAA,E;UATjCC,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;QAYYf,YAAA,CAEeO,uBAAA;MAFDC,KAAK,EAAC,IAAI;MAACC,IAAI,EAAC;;MAZ1CJ,OAAA,EAAAC,QAAA,CAagB,MAAsC,CAAtCN,YAAA,CAAsCgB,mBAAA;QAbtDC,UAAA,EAamCd,MAAA,CAAAC,OAAO,CAACc,QAAQ;QAbnD,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAamCjB,MAAA,CAAAC,OAAO,CAACc,QAAQ,GAAAE,MAAA;;MAbnDL,CAAA;QAeYf,YAAA,CAEeO,uBAAA;MAFDC,KAAK,EAAC,IAAI;MAACC,IAAI,EAAC;;MAf1CJ,OAAA,EAAAC,QAAA,CAgBgB,MAAuC,CAAvCN,YAAA,CAAuCgB,mBAAA;QAhBvDC,UAAA,EAgBmCd,MAAA,CAAAC,OAAO,CAACiB,QAAQ;QAhBnD,uBAAAF,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAgBmCjB,MAAA,CAAAC,OAAO,CAACiB,QAAQ,GAAAD,MAAA;;MAhBnDL,CAAA;;IAAAA,CAAA;gCAmBQO,mBAAA,CAEM,OAFNC,UAEM,GADFvB,YAAA,CAA4GwB,oBAAA;IAAjGC,IAAI,EAAC,SAAS;IAAEC,OAAO,EAAEvB,MAAA,CAAAwB,gBAAgB;IAAGC,OAAK,EAAAT,MAAA,QAAAA,MAAA,MAAAC,MAAA,KAAEjB,MAAA,CAAA0B,cAAc,EAACC,IAAA,CAAAC,KAAK;;IApB9F1B,OAAA,EAAAC,QAAA,CAoB0G,MAAE,CApB5G0B,gBAAA,CAoB0G,IAAE,E;IApB5GjB,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}