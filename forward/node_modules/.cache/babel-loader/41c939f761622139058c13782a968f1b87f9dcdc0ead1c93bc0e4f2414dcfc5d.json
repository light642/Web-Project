{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { ref } from 'vue';\nexport default {\n  __name: 'NewRoom',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const addDialogLoading = ref(false);\n    const newRoom = ref({\n      img: File,\n      roomType: \"\",\n      location: \"\"\n    });\n    const imgList = ref([]);\n    const addImg = option => {\n      imgList.value.push(option);\n    };\n    async function addMeetingRoom() {\n      let dataForm = new FormData();\n      dataForm.append('roomType', newRoom.roomType);\n      dataForm.append('location', newRoom.location);\n      imgList.value.forEach((it, index) => {\n        dataForm.append('filename', it.file);\n      });\n      await axios({\n        method: 'POST',\n        url: 'http://localhost:9002/',\n        data: dataForm,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(response => {\n        console.log(response.data);\n      });\n      addForm.value.validate(valid => {\n        if (valid) {\n          addDialogLoading.value = true;\n          // 模拟异步请求\n          axios.post(\"/room\", newMeetingRoom.value);\n          addDialogLoading.value = false;\n          //getMeetingRoomList()\n        }\n      });\n    }\n    ;\n    const __returned__ = {\n      addDialogLoading,\n      newRoom,\n      imgList,\n      addImg,\n      addMeetingRoom,\n      get axios() {\n        return axios;\n      },\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","ref","addDialogLoading","newRoom","img","File","roomType","location","imgList","addImg","option","value","push","addMeetingRoom","dataForm","FormData","append","forEach","it","index","file","method","url","data","headers","then","response","console","log","addForm","validate","valid","post","newMeetingRoom"],"sources":["C:/Users/Lenovo/Documents/Workspace/Web Project/forward/src/components/admin/NewRoom.vue"],"sourcesContent":["<template>\r\n        <el-form :model=\"newRoom\">\r\n            <el-form-item label=\"图片\" prop=\"name\">\r\n                <el-upload\r\n                    :http-request=\"addImg\"\r\n                    multiple\r\n                    :show-file-list=\"true\"\r\n                    list-type=\"picture-card\"\r\n                >\r\n                <el-icon><Plus /></el-icon>\r\n                </el-upload>\r\n            </el-form-item>\r\n            <el-form-item label=\"类型\" prop=\"capacity\">\r\n                <el-input v-model=\"newRoom.roomType\"/>\r\n            </el-form-item>\r\n            <el-form-item label=\"位置\" prop=\"name\">\r\n                <el-input v-model=\"newRoom.location\" />\r\n            </el-form-item>\r\n        </el-form>\r\n        <div class=\"dialog-footer\">\r\n            <el-button type=\"primary\" :loading=\"addDialogLoading\" @click=\"addMeetingRoom,$emit('submit')\">确定</el-button>\r\n        </div>\r\n</template>\r\n<script setup>\r\nimport axios from 'axios';\r\nimport { ref } from 'vue';\r\n\r\nconst addDialogLoading = ref(false);\r\nconst newRoom = ref({\r\n    img: File,\r\n    roomType:\"\",\r\n    location:\"\"\r\n});\r\nconst imgList =ref([])\r\nconst addImg=(option)=>{\r\n    imgList.value.push(option)\r\n}\r\nasync function addMeetingRoom (){\r\n    let dataForm = new FormData();\r\n    dataForm.append('roomType', newRoom.roomType)\r\n    dataForm.append('location', newRoom.location)\r\n \r\n    imgList.value.forEach((it,index)=>{\r\n        dataForm.append('filename',it.file)\r\n    })\r\n    await axios({\r\n        method: 'POST',\r\n        url: 'http://localhost:9002/',\r\n        data: dataForm,\r\n        headers: {\r\n            \"Content-Type\": \"multipart/form-data\"\r\n        }\r\n    }).then(response => {\r\n        console.log(response.data)\r\n    })\r\n\r\n\r\n\r\n\r\n    addForm.value.validate((valid) => {\r\n        if (valid) {\r\n            addDialogLoading.value = true;\r\n            // 模拟异步请求\r\n            axios.post(\"/room\", newMeetingRoom.value);\r\n            addDialogLoading.value = false;\r\n            //getMeetingRoomList()\r\n        }\r\n    });\r\n};\r\n</script>"],"mappings":";AAwBA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,GAAG,QAAQ,KAAK;;;;;;;IAEzB,MAAMC,gBAAgB,GAAGD,GAAG,CAAC,KAAK,CAAC;IACnC,MAAME,OAAO,GAAGF,GAAG,CAAC;MAChBG,GAAG,EAAEC,IAAI;MACTC,QAAQ,EAAC,EAAE;MACXC,QAAQ,EAAC;IACb,CAAC,CAAC;IACF,MAAMC,OAAO,GAAEP,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMQ,MAAM,GAAEC,MAAM,IAAG;MACnBF,OAAO,CAACG,KAAK,CAACC,IAAI,CAACF,MAAM,CAAC;IAC9B,CAAC;IACD,eAAeG,cAAcA,CAAA,EAAG;MAC5B,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC7BD,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEb,OAAO,CAACG,QAAQ,CAAC;MAC7CQ,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEb,OAAO,CAACI,QAAQ,CAAC;MAE7CC,OAAO,CAACG,KAAK,CAACM,OAAO,CAAC,CAACC,EAAE,EAACC,KAAK,KAAG;QAC9BL,QAAQ,CAACE,MAAM,CAAC,UAAU,EAACE,EAAE,CAACE,IAAI,CAAC;MACvC,CAAC,CAAC;MACF,MAAMpB,KAAK,CAAC;QACRqB,MAAM,EAAE,MAAM;QACdC,GAAG,EAAE,wBAAwB;QAC7BC,IAAI,EAAET,QAAQ;QACdU,OAAO,EAAE;UACL,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,IAAI;QAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACH,IAAI,CAAC;MAC9B,CAAC,CAAC;MAKFM,OAAO,CAAClB,KAAK,CAACmB,QAAQ,CAAEC,KAAK,IAAK;QAC9B,IAAIA,KAAK,EAAE;UACP7B,gBAAgB,CAACS,KAAK,GAAG,IAAI;UAC7B;UACAX,KAAK,CAACgC,IAAI,CAAC,OAAO,EAAEC,cAAc,CAACtB,KAAK,CAAC;UACzCT,gBAAgB,CAACS,KAAK,GAAG,KAAK;UAC9B;QACJ;MACJ,CAAC,CAAC;IACN;IAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}