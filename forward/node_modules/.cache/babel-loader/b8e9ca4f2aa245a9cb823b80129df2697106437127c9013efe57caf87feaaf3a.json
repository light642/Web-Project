{"ast":null,"code":"import { useModel as _useModel } from 'vue';\nimport axios from 'axios';\nimport { ref, defineModel } from 'vue';\nexport default {\n  __name: 'NewRoom',\n  props: {\n    \"modelValue\": {},\n    \"modelModifiers\": {}\n  },\n  emits: [\"update:modelValue\"],\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const model = _useModel(__props, \"modelValue\");\n    const addDialogLoading = ref(false);\n    const newMeetingRoom = ref({\n      name: '',\n      capacity: null\n    });\n    const addFormRules = ref({\n      name: [{\n        required: true,\n        message: '请输入会议室名称',\n        trigger: 'blur'\n      }],\n      capacity: [{\n        required: true,\n        message: '请输入容纳人数',\n        trigger: 'blur'\n      }, {\n        type: 'number',\n        message: '请输入有效的数字',\n        trigger: 'blur'\n      }]\n    });\n    const addForm = ref(null);\n    const addMeetingRoom = () => {\n      addForm.value.validate(valid => {\n        if (valid) {\n          addDialogLoading.value = true;\n          // 模拟异步请求\n          axios.post(\"/meetingRoom/createMeetingRoom/\", newMeetingRoom.value).then(res => {\n            console.log(res.data.code);\n            console.log(res.data.code == 200);\n            if (res.data.code === 200) {\n              this.$message.success(\"添加会议室成功\");\n              //getMeetingRoomList()\n            }\n          }).catch(err => {\n            console.log(err);\n            this.$message.error(\"内部异常，添加失败\");\n          });\n          resetAddDialog();\n          addDialogLoading.value = false;\n          //getMeetingRoomList()\n        }\n      });\n    };\n    const resetAddDialog = () => {\n      model.value = false;\n      addForm.value.resetFields();\n    };\n    const __returned__ = {\n      model,\n      addDialogLoading,\n      newMeetingRoom,\n      addFormRules,\n      addForm,\n      addMeetingRoom,\n      resetAddDialog,\n      get axios() {\n        return axios;\n      },\n      ref,\n      defineModel\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","ref","defineModel","model","_useModel","__props","addDialogLoading","newMeetingRoom","name","capacity","addFormRules","required","message","trigger","type","addForm","addMeetingRoom","value","validate","valid","post","then","res","console","log","data","code","$message","success","catch","err","error","resetAddDialog","resetFields"],"sources":["C:/Users/Lenovo/Documents/webProj/web/src/components/admin/NewRoom.vue"],"sourcesContent":["<template>\r\n        <el-form :model=\"newMeetingRoom\" ref=\"addForm\" :rules=\"addFormRules\" label-width=\"80px\">\r\n            <el-form-item label=\"会议室名称\" prop=\"name\">\r\n                <el-input v-model=\"newMeetingRoom.name\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"容纳人数\" prop=\"capacity\">\r\n                <el-input-number v-model=\"newMeetingRoom.capacity\" :min=\"1\" />\r\n            </el-form-item>\r\n        </el-form>\r\n        <div class=\"dialog-footer\">\r\n            <el-button @click=\"resetAddDialog\">取消</el-button>\r\n            <el-button type=\"primary\" :loading=\"addDialogLoading\" @click=\"addMeetingRoom\">确定</el-button>\r\n        </div>\r\n</template>\r\n<script setup>\r\nimport axios from 'axios';\r\nimport { ref , defineModel } from 'vue';\r\n\r\nconst model = defineModel();\r\nconst addDialogLoading = ref(false);\r\nconst newMeetingRoom = ref({\r\n    name: '',\r\n    capacity: null\r\n});\r\nconst addFormRules = ref({\r\n    name: [\r\n        { required: true, message: '请输入会议室名称', trigger: 'blur' }\r\n    ],\r\n    capacity: [\r\n        { required: true, message: '请输入容纳人数', trigger: 'blur' },\r\n        { type: 'number', message: '请输入有效的数字', trigger: 'blur' }\r\n    ]\r\n});\r\nconst addForm=ref(null)\r\nconst addMeetingRoom = () => {\r\n    addForm.value.validate((valid) => {\r\n        if (valid) {\r\n            addDialogLoading.value = true;\r\n            // 模拟异步请求\r\n            axios.post(\"/meetingRoom/createMeetingRoom/\", newMeetingRoom.value).then((res) => {\r\n                console.log(res.data.code)\r\n                console.log(res.data.code == 200)\r\n\r\n                if (res.data.code === 200) {\r\n                    this.$message.success(\"添加会议室成功\")\r\n                    //getMeetingRoomList()\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err)\r\n                this.$message.error(\"内部异常，添加失败\")\r\n            });\r\n            resetAddDialog();\r\n            addDialogLoading.value = false;\r\n            //getMeetingRoomList()\r\n        }\r\n    });\r\n};\r\n\r\nconst resetAddDialog = () => {\r\n    model.value= false;\r\n    addForm.value.resetFields();\r\n};\r\n</script>"],"mappings":";AAeA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,GAAG,EAAGC,WAAW,QAAQ,KAAK;;;;;;;;;;;;IAEvC,MAAMC,KAAK,GAAGC,SAAW,CAAAC,OAAA,cAAC,CAAC;IAC3B,MAAMC,gBAAgB,GAAGL,GAAG,CAAC,KAAK,CAAC;IACnC,MAAMM,cAAc,GAAGN,GAAG,CAAC;MACvBO,IAAI,EAAE,EAAE;MACRC,QAAQ,EAAE;IACd,CAAC,CAAC;IACF,MAAMC,YAAY,GAAGT,GAAG,CAAC;MACrBO,IAAI,EAAE,CACF;QAAEG,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,UAAU;QAAEC,OAAO,EAAE;MAAO,CAAC,CAC3D;MACDJ,QAAQ,EAAE,CACN;QAAEE,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,SAAS;QAAEC,OAAO,EAAE;MAAO,CAAC,EACvD;QAAEC,IAAI,EAAE,QAAQ;QAAEF,OAAO,EAAE,UAAU;QAAEC,OAAO,EAAE;MAAO,CAAC;IAEhE,CAAC,CAAC;IACF,MAAME,OAAO,GAACd,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMe,cAAc,GAAGA,CAAA,KAAM;MACzBD,OAAO,CAACE,KAAK,CAACC,QAAQ,CAAEC,KAAK,IAAK;QAC9B,IAAIA,KAAK,EAAE;UACPb,gBAAgB,CAACW,KAAK,GAAG,IAAI;UAC7B;UACAjB,KAAK,CAACoB,IAAI,CAAC,iCAAiC,EAAEb,cAAc,CAACU,KAAK,CAAC,CAACI,IAAI,CAAEC,GAAG,IAAK;YAC9EC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAACC,IAAI,CAAC;YAC1BH,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAACC,IAAI,IAAI,GAAG,CAAC;YAEjC,IAAIJ,GAAG,CAACG,IAAI,CAACC,IAAI,KAAK,GAAG,EAAE;cACvB,IAAI,CAACC,QAAQ,CAACC,OAAO,CAAC,SAAS,CAAC;cAChC;YACJ;UACJ,CAAC,CAAC,CAACC,KAAK,CAAEC,GAAG,IAAK;YACdP,OAAO,CAACC,GAAG,CAACM,GAAG,CAAC;YAChB,IAAI,CAACH,QAAQ,CAACI,KAAK,CAAC,WAAW,CAAC;UACpC,CAAC,CAAC;UACFC,cAAc,CAAC,CAAC;UAChB1B,gBAAgB,CAACW,KAAK,GAAG,KAAK;UAC9B;QACJ;MACJ,CAAC,CAAC;IACN,CAAC;IAED,MAAMe,cAAc,GAAGA,CAAA,KAAM;MACzB7B,KAAK,CAACc,KAAK,GAAE,KAAK;MAClBF,OAAO,CAACE,KAAK,CAACgB,WAAW,CAAC,CAAC;IAC/B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}