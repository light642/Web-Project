{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport RoomDetails from '@/components/RoomDetails.vue';\nimport axios from 'axios';\n//import VueCookie from 'vue-cookie';\n\nexport default {\n  __name: 'RoomView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    let test = false;\n    //test = true;\n    let username = ''; //VueCookie.get(\"username\")\n    /*********/\n    username = \"admin1\";\n    /*********/\n    //页面初始化\n    const currentPage = ref(1);\n    const pageTo = () => {\n      currentRoomList.value = [];\n      let start = 16 * (currentPage.value - 1);\n      let end = start + 16 > roomData.value.length ? roomData.value.length : start + 16;\n      console.log(start + ' ' + end);\n      while (start != end && roomData.value[start] != null) {\n        currentRoomList.value.push(roomData.value[start++]);\n      }\n      console.log(currentRoomList.value);\n    };\n\n    //初始化房间列表\n    const roomData = ref([]);\n    const filterParams = ref({});\n    const currentRoomList = ref([]);\n    const refreshRoomData = () => {\n      roomData.value = [];\n      axios.get('/room', filterParams).then(res => {\n        for (let i in res.data) roomData.value.push(res.data[i]);\n        currentPage.value = 1;\n        pageTo();\n      });\n    };\n    refreshRoomData();\n    const typeFilter = ref('');\n    const options = ref(['option1', 'option2', 'option3']);\n    const dateSelected = ref([]);\n    const filter = () => {\n      if (test == true) {\n        alert('filter clicked!');\n        return;\n      }\n      filterParams.value = {\n        roomType: typeFilter.value,\n        startTime: dateSelected.value ? dateSelected.value[0] : null,\n        endTime: dateSelected.value ? dateSelected.value[1] : null\n      };\n      refreshRoomData();\n    };\n\n    //房间详情\n    const showRoomDetails = ref({\n      visable: false,\n      index: ''\n    });\n    const showDetails = index => {\n      showRoomDetails.value.visable = true;\n      showRoomDetails.value.index = index + currentPage.value * 16 - 16;\n    };\n    const __returned__ = {\n      get test() {\n        return test;\n      },\n      set test(v) {\n        test = v;\n      },\n      get username() {\n        return username;\n      },\n      set username(v) {\n        username = v;\n      },\n      currentPage,\n      pageTo,\n      roomData,\n      filterParams,\n      currentRoomList,\n      refreshRoomData,\n      typeFilter,\n      options,\n      dateSelected,\n      filter,\n      showRoomDetails,\n      showDetails,\n      ref,\n      RoomDetails,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","RoomDetails","axios","test","username","currentPage","pageTo","currentRoomList","value","start","end","roomData","length","console","log","push","filterParams","refreshRoomData","get","then","res","i","data","typeFilter","options","dateSelected","filter","alert","roomType","startTime","endTime","showRoomDetails","visable","index","showDetails"],"sources":["D:/homework/Web-Project/forward/src/views/user/RoomView.vue"],"sourcesContent":["<template>\r\n    \r\n</template>\r\n<script setup>\r\nlet test = false;\r\n//test = true;\r\nimport { ref } from 'vue';\r\nimport RoomDetails from '@/components/RoomDetails.vue';\r\nimport axios from 'axios';\r\n//import VueCookie from 'vue-cookie';\r\n\r\nlet username = ''//VueCookie.get(\"username\")\r\n/*********/\r\nusername=\"admin1\"\r\n/*********/\r\n//页面初始化\r\nconst currentPage=ref(1)\r\nconst pageTo=()=>{\r\n    currentRoomList.value=[]\r\n    let start=16*(currentPage.value-1);\r\n    let end=(start+16>roomData.value.length) ? roomData.value.length : (start+16);\r\n    console.log(start+' '+end);\r\n    while(start!=end&&roomData.value[start]!=null){\r\n        currentRoomList.value.push(roomData.value[start++]);\r\n    }\r\n    console.log(currentRoomList.value)\r\n}\r\n\r\n//初始化房间列表\r\nconst roomData = ref([])\r\nconst filterParams = ref({})\r\nconst currentRoomList=ref([])\r\nconst refreshRoomData = () => {\r\n    roomData.value=[];\r\n    axios.get('/room',filterParams).then((res) => {\r\n        for (let i in res.data) roomData.value.push(res.data[i]);\r\n        \r\n        currentPage.value=1;\r\n        pageTo();\r\n    })\r\n\r\n}\r\nrefreshRoomData();\r\n\r\nconst typeFilter = ref('');\r\nconst options = ref([\r\n    'option1', 'option2', 'option3'\r\n]);\r\nconst dateSelected = ref([]);\r\nconst filter = () => {\r\n    if (test == true) { alert('filter clicked!'); return }\r\n\r\n    filterParams.value = {\r\n        roomType: typeFilter.value,\r\n        startTime: dateSelected.value ? dateSelected.value[0] : null,\r\n        endTime: dateSelected.value ? dateSelected.value[1] : null\r\n    };\r\n    refreshRoomData();\r\n}\r\n\r\n//房间详情\r\nconst showRoomDetails = ref({\r\n    visable: false,\r\n    index: ''\r\n})\r\nconst showDetails = (index) => {\r\n    showRoomDetails.value.visable = true;\r\n    showRoomDetails.value.index = index+currentPage.value*16-16;\r\n}\r\n\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}