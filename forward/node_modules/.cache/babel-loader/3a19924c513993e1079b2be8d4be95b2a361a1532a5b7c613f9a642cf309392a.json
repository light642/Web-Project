{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { relogin } from '@/script/script';\nimport axios from 'axios';\nimport { ref } from 'vue';\nexport default {\n  __name: 'NewRoom',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const addDialogLoading = ref(false);\n    const newRoom = ref({\n      img: File,\n      id: \"\",\n      roomType: \"\"\n    });\n    const imgList = ref([]);\n    const addImg = option => {\n      imgList.value.push(option);\n    };\n    async function addMeetingRoom() {\n      let dataForm = new FormData();\n      dataForm.append('id', newRoom.value.id);\n      dataForm.append('roomType', newRoom.value.roomType);\n      imgList.value.forEach(it => {\n        dataForm.append('file', it.file);\n      });\n      await axios({\n        method: 'POST',\n        url: 'http://localhost:8089/',\n        data: dataForm,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(response => {\n        console.log(response.data);\n      }).catch(relogin);\n    }\n    const __returned__ = {\n      addDialogLoading,\n      newRoom,\n      imgList,\n      addImg,\n      addMeetingRoom,\n      get relogin() {\n        return relogin;\n      },\n      get axios() {\n        return axios;\n      },\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["relogin","axios","ref","addDialogLoading","newRoom","img","File","id","roomType","imgList","addImg","option","value","push","addMeetingRoom","dataForm","FormData","append","forEach","it","file","method","url","data","headers","then","response","console","log","catch"],"sources":["C:/Users/Lenovo/Documents/Workspace/Web Project/forward/src/components/admin/NewRoom.vue"],"sourcesContent":["<template>\r\n    <el-form :model=\"newRoom\">\r\n        <el-form-item label=\"图片\" prop=\"name\">\r\n            <el-upload :http-request=\"addImg\" multiple :show-file-list=\"true\" list-type=\"picture-card\">\r\n                <el-icon>\r\n                    <Plus />\r\n                </el-icon>\r\n            </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"编号\" prop=\"id\">\r\n            <el-input v-model=\"newRoom.id\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"类型\" prop=\"roomType\">\r\n            <el-input v-model=\"newRoom.roomType\" />\r\n        </el-form-item>\r\n    </el-form>\r\n    <div class=\"dialog-footer\">\r\n        <el-button type=\"primary\" :loading=\"addDialogLoading\" @click=\"addMeetingRoom, $emit('submit')\">确定</el-button>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { relogin } from '@/script/script';\r\nimport axios from 'axios';\r\nimport { ref } from 'vue';\r\n\r\nconst addDialogLoading = ref(false);\r\nconst newRoom = ref({\r\n    img: File,\r\n    id: \"\",\r\n    roomType: \"\"\r\n});\r\nconst imgList = ref([])\r\nconst addImg = (option) => {\r\n    imgList.value.push(option)\r\n}\r\nasync function addMeetingRoom() {\r\n    let dataForm = new FormData();\r\n    dataForm.append('id', newRoom.value.id);\r\n    dataForm.append('roomType', newRoom.value.roomType);\r\n\r\n    imgList.value.forEach((it) => {\r\n        dataForm.append('file', it.file)\r\n    })\r\n    await axios({\r\n        method: 'POST',\r\n        url: 'http://localhost:8089/',\r\n        data: dataForm,\r\n        headers: {\r\n            \"Content-Type\": \"multipart/form-data\"\r\n        }\r\n    }).then(response => {\r\n        console.log(response.data)\r\n    }).catch(relogin)\r\n}\r\n</script>"],"mappings":";AAqBA,SAASA,OAAO,QAAQ,iBAAiB;AACzC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,GAAG,QAAQ,KAAK;;;;;;;IAEzB,MAAMC,gBAAgB,GAAGD,GAAG,CAAC,KAAK,CAAC;IACnC,MAAME,OAAO,GAAGF,GAAG,CAAC;MAChBG,GAAG,EAAEC,IAAI;MACTC,EAAE,EAAE,EAAE;MACNC,QAAQ,EAAE;IACd,CAAC,CAAC;IACF,MAAMC,OAAO,GAAGP,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMQ,MAAM,GAAIC,MAAM,IAAK;MACvBF,OAAO,CAACG,KAAK,CAACC,IAAI,CAACF,MAAM,CAAC;IAC9B,CAAC;IACD,eAAeG,cAAcA,CAAA,EAAG;MAC5B,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC7BD,QAAQ,CAACE,MAAM,CAAC,IAAI,EAAEb,OAAO,CAACQ,KAAK,CAACL,EAAE,CAAC;MACvCQ,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEb,OAAO,CAACQ,KAAK,CAACJ,QAAQ,CAAC;MAEnDC,OAAO,CAACG,KAAK,CAACM,OAAO,CAAEC,EAAE,IAAK;QAC1BJ,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEE,EAAE,CAACC,IAAI,CAAC;MACpC,CAAC,CAAC;MACF,MAAMnB,KAAK,CAAC;QACRoB,MAAM,EAAE,MAAM;QACdC,GAAG,EAAE,wBAAwB;QAC7BC,IAAI,EAAER,QAAQ;QACdS,OAAO,EAAE;UACL,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,IAAI;QAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACH,IAAI,CAAC;MAC9B,CAAC,CAAC,CAACM,KAAK,CAAC7B,OAAO,CAAC;IACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}